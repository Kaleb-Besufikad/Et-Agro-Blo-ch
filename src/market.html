<!DOCTYPE html>
<html>

<head>
    <title> EtAgro | Market </title>
    <link rel="stylesheet" type="text/css" href="./src/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="./src/style.css">
</head>

<body>
    <canvas class="background"></canvas>
    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#" target="_blank">EtAgro</a>
        <div class="row" style="height:59px; margin-top: 10px;">
            <div class="col-6">
                <button class="btn btn-light" id="enableEthereumButton" style="height: 50px; width: 97px;">Connect</button>
            </div>
            <div class="col-6">
                <a class="nav-link" href="#"><span  class="text-white"  id="showAccount" style="margin-right: -367px;">None</span>
			</div>
		</div>
    </nav>
    <div class="container">
        <div class="row justify-content-center" style="margin-top: 70px;">
            <div class="col-4">
                <img src="./src/bootstrap-icons/flower1.svg" style="width:50px; height:50px; display: table-cell; vertical-align: middle; margin-left: 195px; margin-top: 5px;">
                <br>
                <h4 style="margin-left:166px; margin-top: -21px;" class="text-black">EtAgro</h4>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-12" style="width: 922px; margin-top: 15px;">
                <div class="card shadow p-3 mb-5" style="border: none; background-color:#000000a8">
                    <div class="row" style="margin-bottom: 10px;">
                        <div class="col-4">
                            <img src="./src/bootstrap-icons/market.svg" style="width:40px; height:40px; color:white; margin-left: 352px;">
                        </div>
                        <div class="col-8">
                            <h3 style="margin-left:118px" class="text-white">Supermarket</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4" style="margin-left:320px">
                            <form id="form">
                                <div class="inter">
                                <label for="formGroupExampleInput" class="form-label  text-white">Product name</label>
                                    <input type="text" class="form-control" id="product_name" placeholder="Product name">
                                </div>
                                <div class="inter">
                                    <button type="button" id="search" class="btn btn-light" style="margin-top:19px; margin-left:95px"><span class="px-2">Validate</span><img src="./src/bootstrap-icons/search.svg" style="width: 25px; height: 25px;" class="pl-3"></button>
                                </div>
                            </form>
                            <div id="purchase_info">
                            	<div class="row" style="margin-top:10px">
	                            	<tr><td ><b class = "black text-white"><label class = "black text-white">Farmer Name</label>:</td></b><td><span class="black" span id="agri_name"></span></td></tr>
								  	<tr><td ><b class = "black text-white"><label class = "black text-white">Location</label></td><td>:</td></b><td><span class="black" span id="agri_location"></span></td></tr>
								  	<tr><td ><b class = "black text-white"><label class = "black text-white">Phone Number</label></td><td>:</td></b><td><span class="black" span id="agri_telephone"></span></td></tr>
								  	<tr><td ><b class = "black text-white"><label class = "black text-white">Product Name</label></td><td>:</td></b><td><span class="black" span id="product_name"></span></td></tr>
								  	<tr><td ><b class = "black text-white"><label class = "black text-white">Product Price</label></td><td>:</td></b><td><span class="black" span id="agri_price"></span></td></tr>
                                    <tr><td ><b class = "black text-white"><label class = "black text-white">Production Date</label></td><td>:</td></b><td><span class="black" span id="date_prod"></span></td></tr>
                                    <tr><td ><b class = "black text-white"><label class = "black text-white">Expiration Date</label></td><td>:</td></b><td><span class="black" span id="date_exp"></span></td></tr>
                            	</div>
                            	<div class="inter">
                                	<button type="button" id="purchase" class="btn btn-light" style="margin-top:19px; margin-left:95px">Purchase</button>
                            	</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="./src/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="./src/particles.js"></script>
<script type="text/javascript" src="./src/sweetalert.min.js"></script>
<script src="vendor/web3/dist/web3.min.js"></script>
<script src="vendor/truffle-contract/dist/truffle-contract.js"></script>
<script type="text/javascript" src="./app.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#form').show();
        $('#purchase_info').hide();

        $("#search").click(function(){
            console.log("searching");
            App.renderProducts();
            $("#form").show();
            $('#purchase_info').show();
        });
         $("#purchase").click(function(){
            swal({
                title: "Are you sure?",
                text: "Once validated, you cannot go back",
                icon: "info",
                buttons: true,
                dangerMode: false,
                })
            .then((willDelete) => {
                if (willDelete) {
                    App.purchase()
                    swal("Order validated! Please validate the transaction from your wallet", {
                        icon: "success",
                    });
                    window.location.reload()

                } 
                else {
                    swal("Order not Validated", {
                       icon: "error", 
                    });
                }
            });
         })
    })
</script>
</html>